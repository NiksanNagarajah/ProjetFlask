{% extends "base.html" %}
{% block main %}
<section class="container-title">
    <h1>Les Auteurs</h1>
    {% if current_user.is_authenticated %}
        <a href="{{ url_for('newAuthor') }}"><button class="add-author-button">Ajouter un auteur</button></a>    
    {% endif %}
</section>

<div class="table-container">
    <div class="table-section">
        <h2>Auteurs - Page 1</h2>
        <table>
            <tr>
                <th>ID</th>
                <th>Nom</th>
                {% if current_user.is_authenticated %}
                    <th colspan="2">Actions</th>
                {% endif %}
            </tr>
            {% for x in authors[:(authors|length // 2)] %}
            <tr>
                <td>{{ x.id }}</td>
                <td>{{ x.name }}</td>
                {% if current_user.is_authenticated %}
                    <td>
                        <a class="action" href="{{ url_for('edit_author', id=x.id) }}">Éditer</a>
                    </td>
                    <td>
                        <a class="action" href="#" onclick="confirmDelete('{{ url_for('delete_author', id=x.id) }}')">Supprimer</a>
                    </td>
                {% endif %}
            </tr>
            {% endfor %}
        </table>
    </div>

    <div class="table-section">
        <h2>Auteurs - Page 2</h2>
        <table>
            <tr>
                <th>ID</th>
                <th>Nom</th>
                {% if current_user.is_authenticated %}
                    <th colspan="2">Actions</th>
                {% endif %}
            </tr>
            {% for x in authors[(authors|length // 2):] %}
            <tr>
                <td>{{ x.id }}</td>
                <td>{{ x.name }}</td>
                {% if current_user.is_authenticated %}
                    <td>
                        <a class="action" href="{{ url_for('edit_author', id=x.id) }}">Éditer</a>
                    </td>
                    <td>
                        <a class="action" href="#" onclick="confirmDelete('{{ url_for('delete_author', id=x.id) }}')">Supprimer</a>
                    </td>
                {% endif %}
            </tr>
            {% endfor %}
        </table>
    </div>
</div>

<script>
function confirmDelete(url) {
    if (confirm("Êtes-vous sûr de vouloir supprimer cet auteur ?")) {
        window.location.href = url;  // Redirige vers l'URL de suppression
    }
}
</script>

{% endblock %}
