{% extends "base.html" %}

{% block head %}
<title>Les Livres</title>
{% endblock %}

{% block styles %}
{{ super() }}
{% endblock %}

{% block main %}
<section class="container-title">
    <h1>Les Livres</h1>
    {% if current_user.is_authenticated %}
        <a href="{{ url_for('newBook') }}"><button class="add-author-button">Ajouter un Livre</button></a>    
    {% endif %}
</section>

<div class="table-container">
    <div class="table-section">
        <h2>Livres</h2>
        <table>
            <tr>
                <th>ID</th>
                <th>Prix</th>
                <th>Titre</th>
                <th>Image</th>

                {% if current_user.is_authenticated %}
                    <th colspan="2">Actions</th>
                {% endif %}
            </tr>
            {% for x in books%}
            <tr>
                <td>{{ x.id }}</td>
                <td>{{ x.price }}€</td>
                <td>{{ x.title }}</td>
                <td><img src="{{ url_for('static', filename='images/' + x.img)}}" alt="{{x.title}}" title="{{x.title}}"></td>
                {% if current_user.is_authenticated %}
                    <td>
                        <a class="action" href="{{ url_for('edit_book', id=x.id) }}">Éditer</a>
                    </td>
                    <td>
                        <a class="action" href="#" onclick="confirmDelete('{{ url_for('delete_book', id=x.id) }}')">Supprimer</a>
                    </td>
                {% endif %}
            </tr>
            {% endfor %}
        </table>
    </div>


</div>

<script>
function confirmDelete(url) {
    if (confirm("Êtes-vous sûr de vouloir supprimer cet auteur ?")) {
        window.location.href = url;  // Redirige vers l'URL de suppression
    }
}
</script>

{% endblock %}
